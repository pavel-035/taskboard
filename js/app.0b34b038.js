(function(){var t={80:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return D}});var a=function(){var t=this,e=t._self._c;return e("div",{ref:"draggableContainerRef",staticClass:"board-draggable-container"},[t._t("default")],2)},r=[],n=s(130);s(4114),s(8111),s(2489),s(7588);class o{constructor({eventType:t,eventOptions:e,element:s,handler:a}){this.eventType=t,this.eventOptions=e,this.element=s,this.handler=a,this.callback=null,this.boundHandler=this.handleEvent.bind(this)}handleEvent(t){this.handler(t,this.callback)}addListener(t){this.callback=t,this.element.addEventListener(this.eventType,this.boundHandler,this.eventOptions)}removeListener(){this.callback=null,this.element.removeEventListener(this.eventType,this.boundHandler,this.eventOptions)}}class i{constructor({columnId:t,rowId:e,id:s,nodeElement:a}){this.columnId=t,this.rowId=e,this.id=s,this.nodeElement=a}isDisable(t){t?l.setTransparent(this.nodeElement):l.dropTransparent(this.nodeElement)}}class c{constructor(t,e){this.cardDataAttribute=e,this.mouseDown=new o({eventType:"pointerdown",element:t,handler:(t,e)=>this.mouseDownHandler(t,e)}),this.mouseUp=new o({eventType:"pointerup",element:t,handler:(t,e)=>this.mouseUpHandler(t,e)}),this.mouseMove=new o({eventType:"pointermove",element:t,handler:(t,e)=>this.mouseMoveHandler(t,e)}),this.targetCardNodeElement=null}mouseDownHandler(t,e){t.target.releasePointerCapture(t.pointerId);const s=t.target.closest("input, button, select, textarea"),a=t.target.closest(`[${this.cardDataAttribute}]`);a&&!s&&(this.targetCardNodeElement=a,e(t,a))}mouseUpHandler(t,e){this.targetCardNodeElement&&(this.targetCardNodeElement=null,e(t))}mouseMoveHandler(t,e){const s=t.target.closest(`[${this.cardDataAttribute}]`);if(s){const a=s.getBoundingClientRect(),r=a.height/2,n=t.pageY-a.top;return e(t,s,n<r?"top":"bottom")}e(null,null)}destroy(){this.mouseDown.removeListener(),this.mouseUp.removeListener(),this.mouseMove.removeListener(),this.targetCardNodeElement=null}}class l{static setTransparent(t){t.style.opacity=.5}static dropTransparent(t){t.style.opacity=1}}s(116);class d{constructor({id:t,nodeElement:e}){this.id=t,this.nodeElement=e}}class u{constructor(t){this.columnElement=t,this.mouseMove=new o({eventType:"pointermove",element:t,handler:(t,e)=>e(t)}),this.mouseDown=new o({eventType:"pointerdown",element:t,handler:(t,e)=>e(t)}),this.mouseUp=new o({eventType:"pointerup",element:t,handler:(t,e)=>e(t)}),this.mouseEnter=new o({eventType:"pointerenter",element:t,handler:(t,e)=>e(t)}),this.mouseLeave=new o({eventType:"pointerleave",element:t,handler:(t,e)=>e(t)})}destroy(){this.mouseLeave.removeListener(),this.mouseEnter.removeListener(),this.mouseDown.removeListener(),this.mouseUp.removeListener()}}class h{constructor({container:t,cardDataAttribute:e,columnDataAttribute:s}){this.container=t,this.cardDataAttribute=e,this.columnDataAttribute=s,this.columnNodeList=[],this.cardNodeList=[]}fetchColumns(){const t=this.container.querySelectorAll(`[${this.columnDataAttribute}]`),e=[];return t.forEach((t=>{const s=new d({id:Number(t.getAttribute(this.columnDataAttribute)),nodeElement:t});this.columnNodeList.push(t),e.push(s)})),e}fetchCards(){const t=[];if(!this.columnNodeList.length)throw new Error("No columns found");return this.columnNodeList.forEach((e=>{const s=e.querySelectorAll(`[${this.cardDataAttribute}]`);s.forEach(((s,a)=>{const r=new i({columnId:Number(e.getAttribute(this.columnDataAttribute)),id:Number(s.getAttribute(this.cardDataAttribute)),rowId:a,nodeElement:s});this.cardNodeList.push(s),t.push(r),s.style.touchAction="none"}))})),t}static observeDOMChanges(t,e){const s=new MutationObserver((()=>{e(),s.disconnect()}));s.observe(t,{subtree:!0,childList:!0})}static findCardByNodeElement(t,e,s){const a=Number(e.getAttribute(s));return null===a?null:t.find((t=>t.id===a))}static getPositionRelativePage(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX}}}class p extends i{constructor(t){super(t),this.offsetWidth=t.nodeElement.offsetWidth,this.mouseOffset={x:0,y:0}}init(t){const{top:e,left:s}=this.getDraggableCardPosition();this.setMouseOffset(t),this.nodeElement=this.nodeElement.cloneNode(!0),f.setWidth(this.nodeElement,this.offsetWidth),f.setPosition(this.nodeElement,s,e),f.setGrabbingStyle(this.nodeElement),document.body.appendChild(this.nodeElement)}move(t,e){f.setPosition(this.nodeElement,t,e)}destroy(){f.dropGrabbingStyle(),document.body.removeChild(this.nodeElement)}setMouseOffset({pageX:t,pageY:e}){const{left:s,top:a}=this.getDraggableCardPosition();this.mouseOffset.x=t-s,this.mouseOffset.y=e-a}getDraggableCardPosition(){return h.getPositionRelativePage(this.nodeElement)}}class m{constructor({card:t}){this.card=t,this.draggableCard=null,this.draggableCardHandler=null}init(t){this.draggableCard=new p(this.card),this.draggableCard.init(t),this.draggableCardHandler=new v(document.body),this.draggableCardHandler.mouseMove.addListener((t=>this._onDragMove(t))),this.draggableCardHandler.mouseUp.addListener((t=>this._onDragDrop(t)))}_onDragMove(t){const e=this.draggableCard.mouseOffset,{x:s,y:a}=this._getDragPosition(t,e);this.draggableCard.move(s,a)}_onDragDrop(){this.draggableCardHandler.destroy(),this.draggableCard.destroy(),this.draggableCardHandler=null,this.draggableCard=null}_getDragPosition({pageX:t,pageY:e},s){return{x:t-s.x,y:e-s.y}}}class f{static setGrabbingStyle(t){t.style.cursor="grabbing",t.style.position="absolute",t.style.zIndex="10",t.style.pointerEvents="none",document.body.style.userSelect="none"}static dropGrabbingStyle(){document.body.style.userSelect="inherit"}static setWidth(t,e){t.style.width=`${e}px`}static setPosition(t,e,s){t.style.left=`${e}px`,t.style.top=`${s}px`}}class v{constructor(t){this.mouseMove=new o({eventType:"pointermove",element:t,handler:(t,e)=>{e(t)}}),this.mouseUp=new o({eventType:"pointerup",element:t,handler:(t,e)=>{e(t)}})}destroy(){this.mouseMove.removeListener(),this.mouseUp.removeListener()}}class b{constructor(t){this.container=t,this.targetPosition={x:0,y:0},this.scrollSpeed=.5}setSpeed(t){this.scrollSpeed=t}_scrollY(){if(Math.abs(this.container.scrollTop-this.targetPosition.y)<1)return this.stop();this.container.scrollBy({top:this.scrollSpeed}),this.animateId=requestAnimationFrame(this._scrollY.bind(this))}scrollY(t){this.targetPosition.y=1===t?this.container.scrollHeight-this.container.clientHeight:0,this._scrollY()}_scrollX(){if(Math.abs(this.container.scrollLeft-this.targetPosition.x)<1)return this.stop();this.container.scrollBy({left:this.scrollSpeed}),this.animateId=requestAnimationFrame(this._scrollX.bind(this))}scrollX(t){this.targetPosition.x=1===t?this.container.scrollWidth-this.container.clientWidth:0,this._scrollX()}stop(){this.animateId&&(cancelAnimationFrame(this.animateId),this.animateId=null)}}class g{constructor({rect:t,scrollTo:e}){this.rect=t,this.scrollTo=e}}class y{constructor(t,e){this.activatorRect=e,this.container=t,this.eventId=this._generateId(),this.isHover=!1,this.mouseOffset={x:0,y:0},this.mouseMove=new o({eventType:"pointermove",element:t,handler:(t,e)=>this._mouseMoveHandler(t,e)}),this.mouseLeave=new o({eventType:"pointerleave",element:t,handler:t=>this._mouseLeaveHandler(t)}),this.focus=new o({eventType:"activatorFocus",element:t,handler:(t,e)=>{t.detail.eventId===this.eventId&&e(t)}}),this.blur=new o({eventType:"activatorBlur",element:t,handler:(t,e)=>{t.detail.eventId===this.eventId&&e(t)}}),this.hover=new o({eventType:"activatorHover",element:t,handler:(t,e)=>{t.detail.eventId===this.eventId&&e(t)}}),this.init()}init(){this.mouseMove.addListener((()=>{})),this.mouseLeave.addListener((()=>{}))}destroy(){this.mouseMove.removeListener(),this.mouseLeave.removeListener(),this.focus.removeListener(),this.blur.removeListener(),this.hover.removeListener()}_mouseMoveHandler(t){const e=this.container.getBoundingClientRect(),s={left:e.left+window.scrollX,top:e.top+window.scrollY};this.mouseOffset.x=t.pageX-s.left,this.mouseOffset.y=t.pageY-s.top;const a=this.mouseOffset.x>=this.activatorRect.left&&this.mouseOffset.x<=this.activatorRect.right&&this.mouseOffset.y>=this.activatorRect.top&&this.mouseOffset.y<=this.activatorRect.bottom;if(a){const t=new CustomEvent("activatorHover",{detail:{eventId:this.eventId}});if(this.container.dispatchEvent(t),!this.isHover){const t=new CustomEvent("activatorFocus",{detail:{eventId:this.eventId}});this.container.dispatchEvent(t),this.isHover=!0}}else if(this.isHover){const t=new CustomEvent("activatorBlur",{detail:{eventId:this.eventId}});this.container.dispatchEvent(t),this.isHover=!1}}_mouseLeaveHandler(t){const e=new CustomEvent("activatorBlur",{detail:{eventId:this.eventId}});this.container.dispatchEvent(e),this.mouseLeave.removeListener(),this.isHover=!1}_generateId(){return"id-"+Date.now()+"-"+Math.floor(1e4*Math.random())}}class w{constructor({container:t,maxScrollSpeed:e}){this.container=t,this.maxScrollSpeed=e,this.activatorsList=[],this.activatorHandlers=[]}add(t){if(!(t instanceof g))throw new Error("activator must be a ScrollActivator");this.activatorsList.push(t)}init(){this.activatorsList.forEach((t=>{const e=new b(this.container),s=new y(this.container,t.rect);s.hover.addListener((()=>{const a=this._calculateScrollSpeed(s.mouseOffset,t.rect,t.scrollTo);e.setSpeed(a)})),s.focus.addListener((()=>{switch(t.scrollTo){case"top":e.scrollY(-1);break;case"right":e.scrollX(1);break;case"bottom":e.scrollY(1);break;case"left":e.scrollX(-1);break}})),s.blur.addListener((()=>{e.stop()})),this.activatorHandlers.push(s)}))}destroy(){this.container=null,this.maxScrollSpeed=null,this.activatorsList.splice(0,this.activatorsList.length),this.activatorHandlers.forEach((t=>t.destroy())),this.activatorHandlers.splice(0,this.activatorHandlers.length)}_calculateScrollSpeed(t,e,s){const a=this.maxScrollSpeed;let r=0,n=0,o=1;switch(s){case"top":r=t.y-e.top,n=e.bottom-e.top,o=-1;break;case"bottom":r=e.bottom-t.y,n=e.bottom-e.top,o=1;break;case"left":r=t.x-e.left,n=e.right-e.left,o=-1;break;case"right":r=e.right-t.x,n=e.right-e.left,o=1;break}return o*Math.max(0,(1-r/n)*a)}}class k{constructor(t){this.container=t,this.scroller=null}init(){this.scroller=new w({container:this.container,maxScrollSpeed:10});const t=new g({rect:{top:0,right:this.container.clientWidth/5,bottom:this.container.clientHeight,left:0},scrollTo:"left"});this.scroller.add(t);const e=new g({rect:{top:0,right:this.container.clientWidth,bottom:this.container.clientHeight,left:this.container.clientWidth-this.container.clientWidth/5},scrollTo:"right"});this.scroller.add(e),this.scroller.init()}destroy(){this.scroller&&this.scroller.destroy()}}class C{constructor(t,e){if(!(t instanceof d))throw new Error("column must be a Column");this.column=t,this.scrollDataAttribute=e,this.scroller=null}init(){const t=this.column.nodeElement.querySelector(`[${this.scrollDataAttribute}]`);this.scroller=new w({container:t,maxScrollSpeed:5});const e=new g({rect:{top:0,right:t.clientWidth,bottom:t.clientHeight/4,left:0},scrollTo:"top"});this.scroller.add(e);const s=new g({rect:{top:t.clientHeight-t.clientHeight/4,right:t.clientWidth,bottom:t.clientHeight,left:0},scrollTo:"bottom"});this.scroller.add(s),this.scroller.init()}destroy(){this.scroller&&this.scroller.destroy()}}var _=class{constructor({container:t,columnDataAttribute:e,cardDataAttribute:s,scrollDataAttribute:a,onDrop:r}){this.container=t,this.columnDataAttribute=e,this.cardDataAttribute=s,this.scrollDataAttribute=a,this.onDropCallback=r,this.disable=!1,this.DOMManager=null,this.colums=[],this.cards=[],this.eventHandlers=[],this.editCard=null,this.focusColumnId=null,this.focusRowId=null,this.init(),this.update()}init(){this.DOMManager=new h({container:this.container,cardDataAttribute:this.cardDataAttribute,columnDataAttribute:this.columnDataAttribute})}update(){this.clearEventHandlers(),this.colums=this.DOMManager.fetchColumns(),this.cards=this.DOMManager.fetchCards(),this.initEventHandlers()}destroy(){this.colums.splice(0,this.colums.length),this.cards.splice(0,this.cards.length),this.clearEventHandlers()}initEventHandlers(){this.colums.forEach((t=>{t.nodeElement.style.touchAction="none";const e=new C(t,this.scrollDataAttribute),s=new u(t.nodeElement);s.mouseDown.addListener((()=>{e.init()})),s.mouseUp.addListener((()=>{e.destroy()})),s.mouseEnter.addListener((()=>{this.focusColumnId=t.id,this.editCard&&e.init()})),s.mouseLeave.addListener((()=>{this.focusColumnId=null,this.editCard&&e.destroy()})),this.eventHandlers.push(s)}));const t=new k(this.container),e=new c(this.container,this.cardDataAttribute);e.mouseDown.addListener(((s,a)=>{this.disable||(this.onMouseDown(s,a),t.init(),e.mouseUp.addListener((()=>{this.onMouseUp(),e.mouseMove.removeListener(),t.destroy()})),e.mouseMove.addListener(((t,e,s)=>{this.onMouseMove(t,e,s)})))})),h.observeDOMChanges(this.container,(()=>this.update())),this.eventHandlers.push(e)}clearEventHandlers(){this.eventHandlers.forEach((t=>t.destroy())),this.eventHandlers.splice(0,this.eventHandlers.length)}onMouseDown(t,e){this.editCard=h.findCardByNodeElement(this.cards,e,this.cardDataAttribute);const s=new m({card:this.editCard});s.init(t),this.editCard.isDisable(!0)}onMouseUp(){const t=this.focusColumnId,e=this.focusRowId,s=this.editCard.id;null!==t&&null!==s&&null!==e&&(this.editCard.columnId===t&&this.editCard.rowId===e||this.onDropCallback(s,t,e)),this.editCard.isDisable(!1),this.focusRowId=null,this.editCard=null}onMouseMove(t,e,s){this.focusRowId=this.calculateTargetRowId(e,s)}calculateTargetRowId(t,e){if(!t)return 0;const s=h.findCardByNodeElement(this.cards,t,this.cardDataAttribute);if(s.id===this.editCard.id)return this.editCard.rowId;const a=s.columnId!==this.editCard.columnId,r=this.cards.filter((t=>t.columnId===this.focusColumnId)).sort(((t,e)=>t.rowId-e.rowId)),n=s.rowId>this.editCard.rowId,o=r.at(-1)?.rowId??0,i=a?o+1:o;switch(e){case"top":return!a&&n?Math.max(s.rowId-1,0):s.rowId;case"bottom":return!a&&n?s.rowId:Math.min(s.rowId+1,i);default:return 0}}},T={name:"BoardDraggableContainer",data(){return{dragAndDrop:null}},mounted(){this.dragAndDrop=new _({container:this.$refs.draggableContainerRef,cardDataAttribute:"data-draggable-card",columnDataAttribute:"data-draggable-column",scrollDataAttribute:"data-draggable-column-scroll",onDrop:this.onDrop})},computed:{...(0,n.L8)("statuses",["getStatusByID"]),...(0,n.L8)("tasks",["getTaskById"])},methods:{...(0,n.i0)("tasks",{ActionEditOrder:"editOrder"}),async onDrop(t,e,s){const a=this.getStatusByID(e),r=this.getTaskById(t);try{this.dragAndDrop.disable=!0;const n={status_id:e,order:s};await this.ActionEditOrder({id:t,task:n}),this.$alert("success",`Задача перемещена в "${a.label}"`,r.description)}catch(n){this.$alert("error",`Не удалось переместить задачу в "${a.label}"`,r.description)}finally{this.dragAndDrop.disable=!1}}},beforeDestroy(){this.dragAndDrop.destroy()}},S=T,B=s(1656),A=(0,B.A)(S,a,r,!1,null,"140e58ad",null),D=A.exports},218:function(t,e,s){"use strict";var a=s(404),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t.isLoad?t._e():[e("router-view")],e("base-alert-bar"),e("base-modal-container")],2)},n=[],o=s(130),i=s(7372),c=s(8213),l={name:"App",components:{BaseAlertBar:c["default"],BaseModalContainer:i["default"]},data(){return{isLoad:!1}},async created(){try{this.isLoad=!0,await this.ActionLoadTasks(),await this.ActionLoadStatuses(),await this.ActionLoadTasksByStatuses()}catch(t){console.error(t)}finally{this.isLoad=!1}},methods:{...(0,o.i0)("tasks",{ActionLoadTasks:"loadTasks"}),...(0,o.i0)("statuses",{ActionLoadTasksByStatuses:"loadTasksByStatuses",ActionLoadStatuses:"loadStatuses"})}},d=l,u=s(1656),h=(0,u.A)(d,r,n,!1,null,null,null),p=h.exports,m=(s(8111),s(116),s(9757));s(4114),s(1701);const f={dbPromise:null,upgrade(t){const e=t.target.result;e.objectStoreNames.contains("tasks")||e.createObjectStore("tasks",{keyPath:"id",autoIncrement:!0});const s=t.target.transaction,a=s.objectStore("tasks");a.indexNames.contains("description")||a.createIndex("description","description",{unique:!1}),a.indexNames.contains("status_id")||a.createIndex("status_id","status_id",{unique:!1}),a.indexNames.contains("order")||a.createIndex("order","order",{unique:!1})},init(t){return this.dbPromise=t,this},async getAll(){try{const t=this.dbPromise.transaction("tasks","readonly"),e=t.objectStore("tasks"),s=[];let a=await e.openCursor();while(a)s.push(a.value),a=await a.continue();return s}catch(t){throw console.error("[DB] Getting tasks list",t),t}},async getById(t){try{const e=this.dbPromise.transaction("tasks","readonly"),s=e.objectStore("tasks"),a=await s.get(t);return a??null}catch(e){throw console.error("[DB] Finding task by ID",e),e}},async post(t){try{const e=await C.statuses.getTasksByStatusId(t.status_id),s=this.dbPromise.transaction("tasks","readwrite"),a=s.objectStore("tasks"),r=await a.add({...t,order:e.length});return r??null}catch(e){throw console.error("[DB] Adding new task",e),e}},async patchOrder(t,e){try{const s=await this.getById(t);if(!s)throw new Error(`Task with ID ${t} not found.`);const a=e.status_id!==s.status_id;a?(await this.recalculateOrder(s.status_id,null,s),await this.recalculateOrder(e.status_id,e,null)):await this.recalculateOrder(e.status_id,e,s)}catch(s){throw console.error("[DB] Updating task order",s),s}},async recalculateOrder(t,e,s){try{const a=await C.statuses.getTasksByStatusId(t);a.sort(((t,e)=>t.order-e.order)),s&&a.splice(s.order,1),e&&a.splice(e.order,0,e),await Promise.all(a.map(((t,e)=>this.patch(t.id,{...t,order:e}))))}catch(a){throw console.error("[DB] Recalculating task order",a),a}},async patch(t,e){try{const s=this.dbPromise.transaction("tasks","readwrite"),a=s.objectStore("tasks"),r=await a.openCursor(t);return r?(await r.update(e),e):null}catch(s){throw console.error("[DB] Updating task",s),s}},async del(t){try{const e=await this.getById(t);if(!e)throw new Error(`Task with ID ${t} not found.`);const s=this.dbPromise.transaction("tasks","readwrite"),a=s.objectStore("tasks"),r=await a.openCursor(t);r&&await r.delete(),await this.recalculateOrder(e.status_id,null,e)}catch(e){throw console.error("[DB] Deleting task",e),e}}};var v=f;const b={dbPromise:null,upgrade(t){const e=t.target.result;e.objectStoreNames.contains("statuses")||e.createObjectStore("statuses",{keyPath:"id",autoIncrement:!0});const s=t.target.transaction,a=s.objectStore("statuses");a.indexNames.contains("label")||a.createIndex("label","label",{unique:!1}),a.indexNames.contains("color")||a.createIndex("color","color",{unique:!1})},init(t){return this.dbPromise=t,b},async getAll(){try{const t=this.dbPromise.transaction("statuses","readonly"),e=t.objectStore("statuses"),s=[];let a=await e.openCursor();while(a)s.push(a.value),a=await a.continue();return await t.done,s}catch(t){throw console.error("[DB] Getting statuses list",t),t}},async getById(t){try{const e=this.dbPromise.transaction("statuses","readonly"),s=e.objectStore("statuses"),a=await s.get(t);return a??null}catch(e){throw console.error("[DB] Finding status by ID",e),e}},async getTasksByStatuses(){try{const t=await this.getAll(),e=[];for(const s of t){const t=this.dbPromise.transaction("tasks","readonly"),a=t.objectStore("tasks"),r=a.index("status_id"),n=[];let o=await r.openCursor(s.id);while(o)n.push(o.value),o=await o.continue();n.sort(((t,e)=>t.order-e.order)),e.push({...s,tasks:n})}return e}catch(t){throw console.error("[DB] Getting tasks grouped by statuses",t),t}},async getTasksByStatusId(t){try{const e=[],s=this.dbPromise.transaction("tasks","readonly"),a=s.objectStore("tasks"),r=a.index("status_id");let n=await r.openCursor(t);while(n)e.push(n.value),n=await n.continue();return e}catch(e){console.error("[DB] Getting tasks by status ID",e)}},async post(t){const e=this.dbPromise.transaction("statuses","readwrite"),s=e.objectStore("statuses");try{const a=await s.add(t);return await e.done,a}catch(a){throw console.error("[DB] Adding new status",a),a}},async patch(t,e){const s=this.dbPromise.transaction("statuses","readwrite"),a=s.objectStore("statuses");try{const r=await a.openCursor(t),n=await r.update(e);return await s.done,n}catch(r){throw console.error("[DB] Updating status",r),r}},async del(t){const e=this.dbPromise.transaction("statuses","readwrite"),s=e.objectStore("statuses");try{const a=await s.openCursor(t),r=await a.delete();return await e.done,r}catch(a){throw console.error("[DB] Deleting status",a),a}}};var g=b;const y="taskboard",w=4,k={dbPromise:null,tasks:null,statuses:null,init:async function(){try{this.dbPromise=await(0,m.P2)(y,w,{upgrade(t,e,s,a,r){v.upgrade(r),g.upgrade(r)}}),this.tasks=v.init(this.dbPromise),this.statuses=g.init(this.dbPromise)}catch(t){console.error("ERROR: failed to open database:",t)}}};var C=k,_={async fetchTasks(){try{const t=await C.tasks.getAll();return t??[]}catch(t){throw console.error("[API] Fetching tasks",t),t}},async addTask(t){try{await C.tasks.post(t)}catch(e){throw console.error("[API] Adding new task",e),e}},async editTask(t){try{await C.tasks.patch(t.id,t)}catch(e){throw console.error("[API] Editing task",e),e}},async editOrder(t){try{await C.tasks.patchOrder(t.id,t)}catch(e){throw console.error("[API] Updating task order",e),e}},async deleteTask(t){try{await C.tasks.del(t)}catch(e){throw console.error("[API] Deleting task",e),e}}},T={async fetchStatuses(){try{const t=await C.statuses.getAll();return t??[]}catch(t){throw console.error("[API] Fetching statuses",t),t}},async fetchTasksByStatuses(){try{const t=await C.statuses.getTasksByStatuses();return t??[]}catch(t){throw console.error("[API] Fetching tasks grouped by statuses",t),t}},async addStatus(t){try{await C.statuses.post(t)}catch(e){throw console.error("[API] Adding new status",e),e}},async editStatus(t){try{await C.statuses.patch(t.id,t)}catch(e){throw console.error("[API] Editing status",e),e}},async deleteStatus(t){try{await C.statuses.del(t)}catch(e){throw console.error("[API] Deleting status",e),e}}},S={tasks:_,statuses:T},B={namespaced:!0,state:()=>({tasks:[]}),mutations:{SET_TASKS(t,e){t.tasks=e}},actions:{async loadTasks({commit:t,dispatch:e}){try{const e=await S.tasks.fetchTasks();t("SET_TASKS",e)}catch(s){throw console.error("[STORE] Loading tasks",s),s}},async createTask({commit:t,state:e,dispatch:s},a){try{await S.tasks.addTask({description:a.description,status_id:a.status_id}),await s("loadTasks"),await s("statuses/loadTasksByStatuses",null,{root:!0})}catch(r){throw console.error("[STORE] Creating task",r),r}},async editTask({commit:t,state:e,dispatch:s},{id:a,task:r}){try{const t=e.tasks.find((t=>t.id===a));await S.tasks.editTask({...t,...r}),await s("loadTasks"),await s("statuses/loadTasksByStatuses",null,{root:!0})}catch(n){throw console.error("[STORE] Editing task",n),n}},async editOrder({commit:t,state:e,dispatch:s,getters:a},{id:r,task:n}){try{const t=a.getTaskById(r);await S.tasks.editOrder({...t,...n}),await s("loadTasks"),await s("statuses/loadTasksByStatuses",null,{root:!0})}catch(o){throw console.error("[STORE] Updating task order",o),o}},async deleteTask({commit:t,state:e,dispatch:s},a){try{await S.tasks.deleteTask(a),await s("loadTasks"),await s("statuses/loadTasksByStatuses",null,{root:!0})}catch(r){throw console.error("[STORE] Deleting task",r),r}}},getters:{getTasks:t=>t.tasks,getTaskById:t=>e=>t.tasks.find((t=>t.id===e))}};const A=[{label:"На согласовании",color:"#FF99E9"},{label:"Новые",color:"#66B8FF"},{label:"В процессе",color:"#FFD466"},{label:"Готово",color:"#53C666"},{label:"Доработать",color:"#F76E85"}];var D={namespaced:!0,state:()=>({statuses:[],tasksByStatuses:[]}),mutations:{SET_STATUSES(t,e){t.statuses=e},SET_TASKS_BY_STATUSES(t,e){t.tasksByStatuses=e}},actions:{async loadStatuses({commit:t,dispatch:e}){try{const e=await S.statuses.fetchStatuses()??[];t("SET_STATUSES",e)}catch(s){throw console.error("[STORE] Loading statuses",s),s}},async loadTasksByStatuses({commit:t,dispatch:e}){try{const s=await S.statuses.fetchTasksByStatuses();if(!s.length)return void await e("generateStatuses");t("SET_TASKS_BY_STATUSES",s)}catch(s){throw console.error("[STORE] Loading tasks by statuses",s),s}},async generateStatuses({dispatch:t}){try{for(const t of A)await S.statuses.addStatus(t);await t("loadStatuses"),await t("loadTasksByStatuses")}catch(e){throw console.error("[STORE] Generating default statuses",e),e}}},getters:{getStatuses:t=>t.statuses,getStatusByID:t=>e=>t.statuses.find((t=>t.id===e)),getTasksByStatuses:t=>t.tasksByStatuses}};a.Ay.use(o.Ay);var E=new o.Ay.Store({modules:{tasks:B,statuses:D}}),x={install(t){t.prototype.$alert=function(t,e,s){this.$root.$emit("alert",{title:e,description:s,type:t,id:I()})}}};function I(){return"id-"+Date.now()+"-"+Math.floor(1e4*Math.random())}var M={install(t){t.prototype.$modal=function({slot:t,slotProps:e,onConfirm:s,onCancel:a,onClose:r}){this.$root.$emit("modal",{slot:t,slotProps:e,onConfirm:s,onCancel:a,onClose:r})}}},O=s(4630),L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("board-draggable-container",{staticClass:"home__wrapper"},t._l(t.getTasksByStatuses,(function(t){return e("board-column",{key:t.id,staticClass:"home__column",attrs:{"status-id":t.id,label:t.label,"background-color-header":t.color,tasks:t.tasks,"data-draggable-column":t.id}})})),1)],1)},P=[],H=s(1248),$=s(80),j={name:"HomeView",components:{BoardDraggableContainer:$["default"],BoardColumn:H["default"]},computed:{...(0,o.L8)("statuses",["getTasksByStatuses"])}},N=j,R=(0,u.A)(N,L,P,!1,null,"5fe48ef0",null),F=R.exports;a.Ay.use(O.Ay);const U=[{path:"/",name:"home",component:F}],q=new O.Ay({routes:U});var V=q,Y={async init(){try{await C.init()}catch(t){console.error("Initialization error indexDB:",t)}}};async function W(){await Y.init(),new a.Ay({render:t=>t(p),router:V,store:E}).$mount("#app")}a.Ay.config.productionTip=!1,a.Ay.use(x),a.Ay.use(M),W()},401:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-dropdown"},[e("div",{staticClass:"base-dropdown__wrapper",on:{focusout:t.hideMenu}},[e("div",{staticClass:"base-dropdown__activator"},[t._t("activator",null,{showMenu:t.showMenu,isOpenMenu:t.isOpenMenu})],2),e("div",{ref:"dropdownMenuRef",staticClass:"base-dropdown__menu",class:{"base-dropdown__menu_active":t.isOpenMenu},on:{"!click":function(e){return t.hideMenu.apply(null,arguments)}}},[t._t("menu")],2)])])},r=[],n={name:"BaseDropdownMenu",data(){return{isOpenMenu:!1}},methods:{showMenu(){this.isOpenMenu=!0},hideMenu(t){const e=this.$refs.dropdownMenuRef.contains(t.relatedTarget);e||(this.isOpenMenu=!1)}}},o=n,i=s(1656),c=(0,i.A)(o,a,r,!1,null,"a3ee86ac",null),l=c.exports},1037:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-task-container"},[e("div",{staticClass:"board-task-container__wrapper"},[t.isEdit?e("board-task-edit",{attrs:{value:t.task.description},on:{save:function(e){return t.saveEdit({description:e})},cancel:t.cancelEdit}}):e("board-task",{attrs:{description:t.task.description},on:{edit:function(e){return t.taskEditMode()},delete:function(e){return t.taskDelete(t.task.id)}}})],1)])},r=[],n=s(130),o=s(2123),i=s(5553),c={name:"BoardTaskContainer",components:{BoardTask:i["default"],BoardTaskEdit:o["default"]},props:{task:{type:Object,required:!0,validator:t=>["id","description"].every((e=>e in t))}},data(){return{isEdit:!1}},computed:{...(0,n.L8)("tasks",["getTaskById"])},methods:{...(0,n.i0)("tasks",{ActionEditTask:"editTask",ActionDeleteTask:"deleteTask"}),async taskDelete(t){const e=this.getTaskById(t);this.$modal({slot:"BaseModalConfirm",slotProps:{title:"Удалить задачу?",description:e.description,confirmLabel:"Удалить"},onConfirm:async()=>{try{await this.ActionDeleteTask(t),this.$alert("success","Задача удалена",e.description)}catch(s){this.$alert("error","Не удалось удалить задачу",e.description)}},onCancel:()=>{this.$alert("error","Удаление задачи отменено",e.description)}})},taskEditMode(){this.isEdit=!0},saveEdit(t){this.ActionEditTask({id:this.task.id,task:t}),this.isEdit=!1},cancelEdit(){this.isEdit=!1}}},l=c,d=s(1656),u=(0,d.A)(l,a,r,!1,null,"38cbfd81",null),h=u.exports},1248:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-column",style:t.styleVariables},[e("div",{staticClass:"board-column__wrapper"},[e("div",{staticClass:"board-column__header"},[e("span",{staticClass:"board-column__label"},[t._v(t._s(t.label))])]),e("div",{staticClass:"board-column__body",attrs:{"data-draggable-column-scroll":""}},[t._l(t.tasks,(function(t){return e("board-task-container",{key:t.id,staticClass:"board-column__task",attrs:{task:t,"data-draggable-card":t.id}})})),e("board-task-create",{attrs:{"status-id":t.statusId}})],2)])])},r=[],n=s(3201),o=s(1037),i={name:"BoardColumn",components:{BoardTaskContainer:o["default"],BoardTaskCreate:n["default"]},props:{statusId:{type:Number,required:!0},label:{type:String,required:!0},backgroundColorHeader:{type:String,default:"transparent"},tasks:{type:Array,required:!0}},computed:{styleVariables(){return{"--background-color-header":this.backgroundColorHeader}}}},c=i,l=s(1656),d=(0,l.A)(c,a,r,!1,null,"f3c7dda2",null),u=d.exports},1280:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"17",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M1.333 18.333H15.5M11.333 1.667L14.667 5 5.5 14.167H2.167v-3.334l9.166-9.166z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},2123:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{ref:"boardTaskEditRef",staticClass:"board-task-edit"},[e("div",{staticClass:"board-task-edit__wrapper",on:{focusout:t.dropEdit}},[e("base-text-area",{ref:"baseTextareaRef",attrs:{placeholder:"Введите текст..."},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}}),e("div",{staticClass:"board-task__menu"},[e("base-button",{attrs:{icon:"x",variant:"content-only",color:"#F53D5C"},on:{"!click":function(e){return t.cancel()}}}),e("base-button",{attrs:{icon:"checkMark",variant:"content-only",color:"#22C33D"},on:{"!click":function(e){return t.save()}}})],1)],1)])},r=[],n=s(3442),o=s(9114),i={name:"BoardTaskEdit",components:{BaseTextArea:o["default"],BaseButton:n["default"]},props:{value:{type:String,default:""}},data(){return{localValue:""}},created(){this.localValue=this.value},async mounted(){await this.$nextTick(),this.$refs.baseTextareaRef.focus()},methods:{save(){if(!this.localValue)return this.$alert("error","Нельзя сохранить пустое значение"),void this.$refs.baseTextareaRef.focus();this.$emit("save",this.localValue)},cancel(){this.localValue=this.value,this.$emit("cancel",this.value)},dropEdit(t){const e=this.$refs.boardTaskEditRef.contains(t.relatedTarget);"TEXTAREA"!==t.target.tagName||e||this.$modal({slot:"BaseModalConfirm",slotProps:{title:"Сохранить изменения?",description:this.localValue,confirmLabel:"Сохранить изменения",cancelConfirm:"Отменить изменения"},onConfirm:this.save,onCancel:this.cancel,onClose:this.$refs.baseTextareaRef.focus})}}},c=i,l=s(1656),d=(0,l.A)(c,a,r,!1,null,"45132772",null),u=d.exports},2132:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"13",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M11.6 1l-10 10m0-10l10 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},2243:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-alert"},[e("div",{staticClass:"base-alert__wrapper",class:`base-alert__wrapper_${t.type}`},[e("base-icon",{staticClass:"base-alert__icon",attrs:{icon:t.iconNameByType[this.type]}}),e("div",{staticClass:"base-alert__body"},[e("span",{staticClass:"base-alert__title"},[t._v(" "+t._s(t.title)+" ")]),e("pre",{staticClass:"base-alert__description"},[t._v(t._s(t.localDescription))])]),e("base-button",{staticClass:"base-alert__close",attrs:{icon:"x",color:"#86949E",variant:"content-only"},on:{click:function(e){return t.$emit("close")}}})],1)])},r=[],n=s(3442),o=s(9353),i={name:"BaseAlert",components:{BaseIcon:o["default"],BaseButton:n["default"]},props:{title:{type:String,required:!0},description:{type:String,default:""},type:{type:String,required:!0,validator:t=>["success","info","warning","error"].includes(t)}},data(){return{iconNameByType:{success:"success",error:"error"}}},computed:{localDescription(){const t=100,e=3,s=this.description,a=this.description.split("\n"),r=this.description.split("\n").slice(0,e).join("\n").substring(0,t);return s.length>t||a.length>e?r+"...":r}}},c=i,l=s(1656),d=(0,l.A)(c,a,r,!1,null,"ea0da46a",null),u=d.exports},2334:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("circle",{attrs:{cx:"12",cy:"12",r:"12",fill:"#F53D5C"}}),s("path",{attrs:{d:"M16 8l-8 8m0-8l8 8",stroke:"#fff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},2863:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M14.667 1L5.5 10.167 1.333 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},3201:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-task-create"},[e("div",{staticClass:"base-task-create__wrapper"},[t.isCreate?e("board-task-edit",{attrs:{value:""},on:{save:t.save,cancel:t.cancel}}):e("base-button",{attrs:{label:"Добавить",icon:"plus",color:"#3D86F4",variant:"content-only"},on:{click:function(e){t.isCreate=!0}}})],1)])},r=[],n=s(130),o=s(2123),i=s(3442),c={name:"BoardTaskCreate",components:{BaseButton:i["default"],BoardTaskEdit:o["default"]},props:{statusId:{type:Number,required:!0}},data(){return{isCreate:!1}},computed:{...(0,n.L8)("statuses",["getStatusByID"])},methods:{...(0,n.i0)("tasks",["createTask"]),async save(t){const e=this.getStatusByID(this.statusId);try{await this.createTask({description:t,status_id:this.statusId}),this.isCreate=!1,this.$alert("success",`Задача создана в "${e.label}"`,t)}catch(s){this.$alert("success",`Не удалось создать в "${e.label}"`,t)}},cancel(){this.isCreate=!1}}},l=c,d=s(1656),u=(0,d.A)(l,a,r,!1,null,"c8e191ac",null),h=u.exports},3442:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("button",t._g(t._b({staticClass:"base-button",class:[`base-button_${t.variant}`],style:t.styleVariables},"button",t.$attrs,!1),t.$listeners),[t.icon?e("base-icon",{staticClass:"base-button__icon",attrs:{icon:t.icon}}):t._e(),t.label?e("span",{staticClass:"base-button__label"},[t._v(" "+t._s(t.label)+" ")]):t._e()],1)},r=[],n=s(9353),o={name:"BaseButton",components:{BaseIcon:n["default"]},props:{label:{type:String,default:""},icon:{type:String,default:""},color:{type:String,default:"#000"},colorHover:{type:String,default:null},variant:{type:String,default:"default",validator:t=>["default","content-only"].includes(t)}},computed:{styleVariables(){return{"--color":this.color,"--color-hover":this.colorHover??this.color}}}},i=o,c=s(1656),l=(0,c.A)(i,a,r,!1,null,"6b050e6a",null),d=l.exports},3533:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("g",{attrs:{"clip-path":"url(#clip0_3716_66)"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"12",fill:"#22C33D"}}),s("path",{attrs:{d:"M16.8 8.4L10.2 15l-3-3",stroke:"#fff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),s("defs",[s("clipPath",{attrs:{id:"clip0_3716_66"}},[s("path",{attrs:{fill:"#fff",d:"M0 0h24v24H0z"}})])])]))}}},3907:function(t,e,s){var a={"./BaseAlert.vue":[2243],"./BaseAlertBar.vue":[8213],"./BaseButton.vue":[3442],"./BaseDropdownMenu.vue":[401],"./BaseIcon.vue":[9353],"./BaseInput.vue":[8051,51],"./BaseModalConfirm.vue":[1612,612],"./BaseModalContainer.vue":[7372],"./BaseTextArea.vue":[9114],"./BoardColumn.vue":[1248],"./BoardDraggableContainer.vue":[80],"./BoardTask.vue":[5553],"./BoardTaskContainer.vue":[1037],"./BoardTaskCreate.vue":[3201],"./BoardTaskEdit.vue":[2123],"./BoardTaskMenu.vue":[8487]};function r(t){if(!s.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],r=e[0];return Promise.all(e.slice(1).map(s.e)).then((function(){return s(r)}))}r.keys=function(){return Object.keys(a)},r.id=3907,t.exports=r},4120:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"16",height:"4",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M8 2.833a.833.833 0 100-1.666.833.833 0 000 1.666zM13.833 2.833a.833.833 0 100-1.666.833.833 0 000 1.666zM2.167 2.833a.833.833 0 100-1.666.833.833 0 000 1.666z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},5553:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-task"},[e("div",{staticClass:"board-task__wrapper"},[e("pre",{staticClass:"board-task__description"},[t._v(t._s(t.description))]),e("base-dropdown-menu",{staticClass:"board-task__menu",scopedSlots:t._u([{key:"activator",fn:function({showMenu:t,isOpenMenu:s}){return[e("base-button",{attrs:{color:s?"#3D86F4":"#86949E","color-hover":"#3D86F4",icon:"burgerDotes",variant:"content-only"},on:{click:t}})]}},{key:"menu",fn:function(){return[e("board-task-menu",{on:{edit:function(e){return t.$emit("edit")},delete:function(e){return t.$emit("delete")}}})]},proxy:!0}])})],1)])},r=[],n=s(3442),o=s(401),i=s(8487),c={name:"BoardTask",components:{BoardTaskMenu:i["default"],BaseDropdownMenu:o["default"],BaseButton:n["default"]},props:{description:{type:String,required:!0}}},l=c,d=s(1656),u=(0,d.A)(l,a,r,!1,null,"1a1d5cd0",null),h=u.exports},6669:function(t,e,s){var a={"./burgerDotes.svg":4120,"./checkMark.svg":2863,"./edit.svg":1280,"./error.svg":2334,"./plus.svg":6788,"./success.svg":3533,"./trash.svg":8906,"./x.svg":2132};function r(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=6669},6788:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"15",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M7.2 1.167v11.666M1.367 7h11.666",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},7372:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return t.isOpen?e("div",{staticClass:"base-modal"},[e("div",{staticClass:"base-modal__wrapper"},[e(t.component,t._b({tag:"component",on:{confirm:function(e){t.confirm(),t.onConfirm()},cancel:function(e){t.cancel(),t.onCancel()},close:function(e){t.close(),t.onClose()}}},"component",t.componentProps,!1))],1)]):t._e()},r=[],n=s(3442),o={name:"BaseModalContainer",components:{BaseButton:n["default"]},data(){return{isOpen:!1,componentName:null,componentProps:null,onConfirm:()=>{},onClose:()=>{},onCancel:()=>{}}},computed:{component(){return()=>s(3907)(`./${this.componentName}.vue`)}},created(){this.$root.$on("modal",(t=>{this.isOpen=!0,this.componentName=t.slot,this.componentProps=t.slotProps,this.onConfirm=t.onConfirm,this.onCancel=t.onCancel,this.onClose=t.onClose}))},methods:{confirm(){this.close()},cancel(){this.close()},close(){this.isOpen=!1}}},i=o,c=s(1656),l=(0,c.A)(i,a,r,!1,null,"a6cadac2",null),d=l.exports},8213:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-alert-bar"},[e("div",{staticClass:"base-alert-bar__wrapper"},[e("transition-group",{attrs:{name:"alert-bar"}},t._l(t.alerts,(function(s){return e("base-alert",{key:s.id,staticClass:"base-alert-bar__element",attrs:{description:s.description,title:s.title,type:s.type},on:{close:function(e){return t.alertClose(s.id)}}})})),1)],1)])},r=[],n=(s(4114),s(2243)),o={name:"BaseAlertBar",components:{BaseAlert:n["default"]},data(){return{alerts:[]}},created(){this.$root.$on("alert",(t=>{this.alerts.push(t),setTimeout((()=>{this.alerts.splice(0,1)}),3e3)}))},methods:{alertClose(t){const e=this.alerts.findIndex((e=>e.id===t));this.alerts.splice(e,1)}}},i=o,c=s(1656),l=(0,c.A)(i,a,r,!1,null,"72fc436c",null),d=l.exports},8487:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-task-menu"},[e("ul",{staticClass:"board-task-menu__wrapper"},t._l(t.menuList,(function(t,s){return e("li",{key:s,staticClass:"board-task-menu__item"},[e("base-button",{attrs:{label:t.label,icon:t.icon,color:"#86949E",variant:"content-only"},on:{click:function(e){return t.onclick()}}})],1)})),0)])},r=[],n=s(3442),o={name:"BoardTaskMenu",components:{BaseButton:n["default"]},data(){return{menuList:[{icon:"edit",label:"Редактировать",onclick:()=>this.$emit("edit")},{icon:"trash",label:"Удалить",onclick:()=>this.$emit("delete")}]}}},i=o,c=s(1656),l=(0,c.A)(i,a,r,!1,null,"035cdeec",null),d=l.exports},8906:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:r,children:n=[]}=e,{class:o,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=r;return s("svg",{class:[o,i],style:[c,l],attrs:Object.assign({width:"18",height:"19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...u},n.concat([s("path",{attrs:{d:"M1 5h18M6 5V3a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5h14z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},9114:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-textarea"},[e("div",{staticClass:"base-textarea__wrapper"},[e("textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],ref:"textareaRef",staticClass:"base-textarea__field",domProps:{value:t.localValue},on:{input:function(e){e.target.composing||(t.localValue=e.target.value)}}},"textarea",t.$attrs,!1))])])},r=[],n={name:"BaseTextArea",props:{value:{type:String,required:!0}},computed:{localValue:{get(){return this.value},set(t){this.resizeTextarea(),this.$emit("input",t)}}},methods:{resizeTextarea(){this.$nextTick((()=>{const t=this.$refs.textareaRef;t.style.height="auto",t.style.height=t.scrollHeight+"px"}))},focus(){this.$nextTick((()=>{this.resizeTextarea(),this.$refs.textareaRef.focus()}))}}},o=n,i=s(1656),c=(0,i.A)(o,a,r,!1,null,"15f478a5",null),l=c.exports},9353:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-icon"},[e("div",{staticClass:"base-icon__wrapper"},[e(t.iconComponent,{tag:"component"})],1)])},r=[],n={name:"BaseIcon",props:{icon:{type:String,required:!0}},computed:{iconComponent(){try{return s(6669)(`./${this.icon}.svg`)}catch(t){return console.error(`Icon not found: ${this.icon}`),null}}}},o=n,i=s(1656),c=(0,i.A)(o,a,r,!1,null,"39a3ecda",null),l=c.exports}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,n){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],n=t[d][2];for(var i=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(i=!1,n<o&&(o=n));if(i){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,r,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{51:"ef1f6762",612:"92a6cc1a"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{51:"1c02a768",612:"16d6d162"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="taskboard:";s.l=function(a,r,n,o){if(t[a])t[a].push(r);else{var i,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+n){i=u;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",e+n),i.src=a),t[a]=[r];var h=function(e,s){i.onerror=i.onload=null,clearTimeout(p);var r=t[a];if(delete t[a],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/taskboard/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",s.nc&&(o.nonce=s.nc);var i=function(s){if(o.onerror=o.onload=null,"load"===s.type)r();else{var a=s&&s.type,i=s&&s.target&&s.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+a+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=i,o.parentNode&&o.parentNode.removeChild(o),n(c)}};return o.onerror=o.onload=i,o.href=e,a?a.parentNode.insertBefore(o,a.nextSibling):document.head.appendChild(o),o},e=function(t,e){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var r=s[a],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===t||n===e))return r}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){r=o[a],n=r.getAttribute("data-href");if(n===t||n===e)return r}},a=function(a){return new Promise((function(r,n){var o=s.miniCssF(a),i=s.p+o;if(e(o,i))return r();t(a,i,null,r,n)}))},r={524:0};s.f.miniCss=function(t,e){var s={51:1,612:1};r[t]?e.push(r[t]):0!==r[t]&&s[t]&&e.push(r[t]=a(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}}(),function(){var t={524:0};s.f.j=function(e,a){var r=s.o(t,e)?t[e]:void 0;if(0!==r)if(r)a.push(r[2]);else{var n=new Promise((function(s,a){r=t[e]=[s,a]}));a.push(r[2]=n);var o=s.p+s.u(e),i=new Error,c=function(a){if(s.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var n=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",i.name="ChunkLoadError",i.type=n,i.request=o,r[1](i)}};s.l(o,c,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,n,o=a[0],i=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(c)var d=c(s)}for(e&&e(a);l<o.length;l++)n=o[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},a=self["webpackChunktaskboard"]=self["webpackChunktaskboard"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(218)}));a=s.O(a)})();
//# sourceMappingURL=app.0b34b038.js.map